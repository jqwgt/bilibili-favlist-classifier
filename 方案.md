概述
参考项目 BiliScope 是一款在 B 站页面上通过鼠标悬停显示 UP 主信息的浏览器扩展，其中包含“UP 主的标签（默认是最常投稿的分区）”功能
github.com
。也就是说，BiliScope 会根据 UP 主历史投稿的视频分区，选取出现频率最高的分区作为其标签。要实现这一功能，BiliScope 首先需要调用哔哩哔哩的用户空间视频列表接口（如 x/space/arc/search，带 /wbi/ 前缀的版本）获取该 UP 主的所有投稿数据，然后统计每个投稿所属的分区（tid），最终找出出现次数最多的分区作为标签
github.com
github.com
。据开发者交流，BiliScope 在显示用户信息卡片时会“先调用该 API 以统计投稿数据，再查询关系信息”
github.com
，说明它确实通过一次拉取投稿列表的操作来汇总分区信息。换句话说，BiliScope 通过批量接口一次性拿到 UP 主的投稿列表后，在本地统计分区出现次数，从中选出最多的那个分区 ID 作为“最常投稿分区”。
获取“最常投稿分区”的具体方法
BiliScope 源码中实际调用了哔哩哔哩的空间投稿 API（例如 https://api.bilibili.com/x/space/wbi/arc/search?mid={mid}&pn={page}&ps={pagesize}）来获取 UP 主的视频列表。这个接口返回的 JSON 数据中包含所有投稿视频条目的信息，其中每个视频条目都有所属分区的字段（tid）。BiliScope 会遍历所有页面的返回结果，将各视频的 tid 取出并计数，从而统计每个分区出现的次数。统计结束后，出现次数最多的那个 tid 对应的分区即为“最常投稿分区”，作为 UP 主标签的默认值
github.com
github.com
。如果用户手动在备注中添加了自定义标签，则会覆盖默认标签，这一点在文档中有说明
github.com
。总之，核心思路是调用空间投稿 API 拉取所有视频列表，然后统计这些视频所属的分区频率，选出最高频的分区。这一点从 BiliScope 开发者的 Issue 交流可以看出：“BiliScope 需要先调用该 API 以统计投稿数据，再查询关系信息”
github.com
。
性能对比
由于 BiliScope 通过分页接口一次性获取 UP 主的整个投稿列表，它只需若干次网络请求即可得到完整数据，然后在本地统计分区频次，因此效率很高。相比之下，原项目 bilibili-favlist-classifier 若对一个 UP 主的所有投稿视频逐条请求分区信息（如每读一个视频单独调用 API ），则耗时明显更长。BiliScope 的做法（使用聚合接口批量拉取并统计）避免了为每个视频单独请求的开销，从而在鼠标悬停时能够快速显示数据
github.com
github.com
。因此，要提升自己项目的性能，可借鉴 BiliScope 的方案：改为调用空间投稿列表 API，一次性获取一个 UP 主所有视频的分区信息，批量处理后即可得到“最常投稿分区”，而不是逐个视频查询。
小结
综上，BiliScope 实现“UP 主标签（最常投稿分区）”的方式是：通过哔哩哔哩空间 API 批量获取 UP 主的投稿视频列表，并统计视频的 tid（分区 ID）出现频率，取最高频的分区作为标签
github.com
github.com
。参考该思路，可在自己的脚本中调用相应 API（如 /x/space/wbi/arc/search）来高效获取所需的标签信息，从而显著改善性能。最终，借鉴 BiliScope 的实现原理，为关注列表分类功能添加 UP 主标签时，就能避免逐条查询，提高整体效率
github.com
github.com
。 参考资料： BiliScope 功能说明
github.com
；BiliScope 源码 Issue 交流（统计投稿数据的说明）
github.com
。
引用

GitHub - gaogaotiantian/biliscope: Bilibili chrome extension to show uploader's stats

https://github.com/gaogaotiantian/biliscope

[Feature] 更换获取关系的API ・ Issue #285 ・ gaogaotiantian/biliscope ・ GitHub

https://github.com/gaogaotiantian/biliscope/issues/285

GitHub - gaogaotiantian/biliscope: Bilibili chrome extension to show uploader's stats

https://github.com/gaogaotiantian/biliscope
全部来源
